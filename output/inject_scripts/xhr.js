(()=>{"use strict";var e={3451:(e,t,n)=>{n.d(t,{b:()=>o});var r=null;function o(e){var t=e.title,n=e.content,o=e.timeout,a=void 0===o?3e3:o,i=document.createElement("div");i.className="chrome-notification-panel";var s=document.createElement("div");s.className="chrome-notification-panel-title";var c=document.createElement("span");c.innerText=t;var u=document.createElement("i");function l(){u.removeEventListener("click",l);var e=i.clientWidth,t=0;requestAnimationFrame((function n(){t+=e/17,i.style.transform="translateX(".concat(t,"px)"),t<e+16?requestAnimationFrame(n):i.remove()}))}u.className="chrome-notification-panel-title-close",u.innerText="x",u.addEventListener("click",l);var f=document.createElement("div");f.className="chrome-notification-panel-content",f.innerHTML=n,s.appendChild(c),s.appendChild(u),i.appendChild(s),i.appendChild(f),r.appendChild(i);var h=i.clientWidth;i.style.transform="translateX(".concat(h+16,"px)");var d=h+16;requestAnimationFrame((function e(){d-=h/17,i.style.transform="translateX(".concat(d,"px)"),d>0&&requestAnimationFrame(e)})),setTimeout(l,a)}(r=document.createElement("div")).className="chrome-notification",document.body.appendChild(r)}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=["load","loadend","timeout","error","readystatechange","abort"];function t(e,t){var n={};for(var r in e)n[r]=e[r];return n.target=n.currentTarget=t,n}var r,o=e[0],a=e[1],i=e[2],s=e[3],c=e[4],u=e[5];function l(e){return e.watcher||(e.watcher=document.createElement("a"))}function f(e,n){var r,o=e.getProxy(),a="on"+n+"_",i=t({type:n},o);o[a]&&o[a](i),"function"==typeof Event?r=new Event(n,{bubbles:!1}):(r=document.createEvent("Event")).initEvent(n,!1,!0),l(e).dispatchEvent(r)}function h(e){this.xhr=e,this.xhrProxy=e.getProxy()}function d(e){function t(e){h.call(this,e)}return t.prototype=Object.create(h.prototype),t.prototype.next=e,t}h.prototype=Object.create({resolve:function(e){var t=this.xhrProxy,n=this.xhr;t.readyState=4,n.resHeader=e.headers,t.response=t.responseText=e.response,t.statusText=e.statusText,t.status=e.status,f(n,c),f(n,o),f(n,a)},reject:function(e){this.xhrProxy.status=0,f(this.xhr,e.type),f(this.xhr,a)}});var p=d((function(e){var t=this.xhr;for(var n in e=e||t.config,t.withCredentials=e.withCredentials,t.open(e.method,e.url,!1!==e.async,e.user,e.password),e.headers)t.setRequestHeader(n,e.headers[n]);t.send(e.body)})),v=d((function(e){this.resolve(e)})),y=d((function(e){this.reject(e)}));function m(n,r){var o=n.onRequest,a=n.onResponse,h=n.onError;function d(){return!0}function m(e){return function(t,n){return function(e,t,n,r){var o=new y(e);n={config:e.config,error:n,type:r},h?h(n,o):o.next(n)}(t,0,n,e),!0}}function x(e,t){return 4===e.readyState&&0!==e.status?function(e,t){var n=new v(e),r={response:t.response,status:t.status,statusText:t.statusText,config:e.config,headers:e.resHeader||e.getAllResponseHeaders().split("\r\n").reduce((function(e,t){if(""===t)return e;var n=t.split(":");return e[n.shift()]=function(e){return e.replace(/^\s+|\s+$/g,"")}(n.join(":")),e}),{})};if(!a)return n.resolve(r);a(r,n)}(e,t):4!==e.readyState&&f(e,c),!0}return function(n,r){function o(e){return function(){var t=this.hasOwnProperty(e+"_")?this[e+"_"]:this.xhr[e],r=(n[e]||{}).getter;return r&&r(t,this)||t}}function a(e){return function(r){var o=this.xhr,a=this,i=n[e];if("on"===e.substring(0,2))a[e+"_"]=r,o[e]=function(i){i=t(i,a),n[e]&&n[e].call(a,o,i)||r.call(a,i)};else{var s=(i||{}).setter;r=s&&s(r,a)||r,this[e+"_"]=r;try{o[e]=r}catch(e){}}}}function i(e){return function(){var t=[].slice.call(arguments);if(n[e]){var r=n[e].call(this,t,this.xhr);if(r)return r}return this.xhr[e].apply(this.xhr,t)}}return(r=r||window)._rxhr=r._rxhr||r.XMLHttpRequest,r.XMLHttpRequest=function(){for(var t=new r._rxhr,n=0;n<e.length;++n)void 0===t[e[n]]&&(t[e[n]]=null);for(var s in t){var c="";try{c=typeof t[s]}catch(e){}"function"===c?this[s]=i(s):Object.defineProperty(this,s,{get:o(s),set:a(s),enumerable:!0})}var u=this;t.getProxy=function(){return u},this.xhr=t},Object.assign(r.XMLHttpRequest,{UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4}),r._rxhr}({onload:d,onloadend:d,onerror:m(s),ontimeout:m(i),onabort:m(u),onreadystatechange:function(e){return x(e,this)},open:function(e,t){var n=this,r=t.config={headers:{}};r.method=e[0],r.url=e[1],r.async=e[2],r.user=e[3],r.password=e[4],r.xhr=t;var a="on"+c;if(t[a]||(t[a]=function(){return x(t,n)}),o)return!0},send:function(e,t){var n=t.config;if(n.withCredentials=t.withCredentials,n.body=e[0],o){var r=function(){o(n,new p(t))};return!1===n.async?r():setTimeout(r),!0}},setRequestHeader:function(e,t){return t.config.headers[e[0].toLowerCase()]=e[1],!0},addEventListener:function(n,r){var o=this;if(-1!==e.indexOf(n[0])){var a=n[1];return l(r).addEventListener(n[0],(function(e){var r=t(e,o);r.type=n[0],r.isTrusted=!0,a.call(o,r)})),!0}},getAllResponseHeaders:function(e,t){var n=t.resHeader;if(n){var r="";for(var o in n)r+=o+": "+n[o]+"\r\n";return r}},getResponseHeader:function(e,t){var n=t.resHeader;if(n)return n[(e[0]||"").toLowerCase()]}},r)}var x=n(3451),w=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))},b=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},g=[];function E(e,t){return w(this,void 0,void 0,(function(){return b(this,(function(n){switch(n.label){case 0:switch(console.log(e),e.mode){case 0:return[3,1];case 1:return[3,2]}return[3,4];case 1:return[2,e.resJson];case 2:return[4,_(e,t)];case 3:return[2,n.sent()];case 4:return[2]}}))}))}function _(e,t){return w(this,void 0,void 0,(function(){return b(this,(function(n){switch(n.label){case 0:return[4,new Function(e.resScript)(t)];case 1:return[2,n.sent()]}}))}))}!function(e){if(r)throw"Proxy already exists";r=new m(e)}({onRequest:function(e,t){return w(void 0,void 0,void 0,(function(){var n,r,o,a,i,s,c;return b(this,(function(u){switch(u.label){case 0:u.trys.push([0,5,6,7]),n=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(g),r=n.next(),u.label=1;case 1:return r.done?[3,4]:(o=r.value,new RegExp(o.regexpStr).test(e.url)?((0,x.b)({title:"xhr_mock_ext拦截提醒",content:'/<span style="color:red">'.concat(o.regexpStr,"</span>/ ,已被拦截")}),[4,E(o,e)]):[3,3]);case 2:return a=u.sent(),console.log(a),[2,t.resolve({config:e,status:200,headers:{"content-type":"application/json;charset=UTF-8"},response:a})];case 3:return r=n.next(),[3,1];case 4:return[3,7];case 5:return i=u.sent(),s={error:i},[3,7];case 6:try{r&&!r.done&&(c=n.return)&&c.call(n)}finally{if(s)throw s.error}return[7];case 7:return t.next(e),[2]}}))}))}}),window.postMessage({event:"inject_get_matching",data:null}),window.addEventListener("message",(function(e){"inject_get_matching_res"===e.data.event&&(g=e.data.data)}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QywyRkFDTixFLHlTQUFBLENBQUFzRCxHQUFTLFcsc0NBQTNCLFVBQ2MsSUFBSVcsT0FBTyxFQUFTQyxXQUN4QkMsS0FBS3ZGLEVBQU9HLE9BQ25CLE9BQUssQ0FDRGxHLE1BQU8sbUJBQ1BDLFFBQVMsbUNBQTRCLEVBQVNvTCxVQUFTLG9CQUUxQyxHQUFNWCxFQUFnQixFQUFVM0UsS0FMakQsTyxPQU9BLE9BRk1YLEVBQVcsU0FDakJ3RixRQUFRQyxJQUFJekYsR0FDTCxDQUFQLEVBQU8rQixFQUFRaEMsUUFBUSxDQUNuQlksT0FBUUEsRUFDUkwsT0FBUSxJQUNSSCxRQUFTLENBQUUsZUFBZ0Isa0NBQzNCSCxTQUFVQSxLLCtMQUt0QitCLEVBQVFuQyxLQUFLZSxHLGNBaUNqQmlELE9BQU91QyxZQUFZLENBQ2ZwSSxNQUFPLHNCQUNQcUksS0FBTSxPQVpWeEMsT0FBTzNILGlCQUFpQixXQUFXLFNBQUNnQyxHQUdiLDRCQUZGQSxFQUFDLEtBRVRGLFFBQ0xzSCxFQUFZcEgsRUFBRW1JLEtBQUtBLFUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly94aHItbW9jay1leHQvLi9zcmMvZW50cmllcy9pbmplY3Rfc2NyaXB0cy9ub3RpZmljYXRpb24udHMiLCJ3ZWJwYWNrOi8veGhyLW1vY2stZXh0L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3hoci1tb2NrLWV4dC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8veGhyLW1vY2stZXh0L3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8veGhyLW1vY2stZXh0Ly4vbm9kZV9tb2R1bGVzL2FqYXgtaG9vay9zcmMveGhyLWhvb2suanMiLCJ3ZWJwYWNrOi8veGhyLW1vY2stZXh0Ly4vbm9kZV9tb2R1bGVzL2FqYXgtaG9vay9zcmMveGhyLXByb3h5LmpzIiwid2VicGFjazovL3hoci1tb2NrLWV4dC8uL3NyYy9lbnRyaWVzL2luamVjdF9zY3JpcHRzL3hoci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJsZXQgY29udGFpbmVyOiBIVE1MRGl2RWxlbWVudCA9IG51bGxcblxuZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAvLyDliJvlu7rlrrnlmahcbiAgICBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIGNvbnRhaW5lci5jbGFzc05hbWUgPSAnY2hyb21lLW5vdGlmaWNhdGlvbidcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNvbnRhaW5lcilcbn1cblxudHlwZSBvcGVuUHJvcHMgPSB7XG4gICAgdGl0bGU6IHN0cmluZyxcbiAgICBjb250ZW50OiBzdHJpbmcsXG4gICAgdGltZW91dD86IG51bWJlclxufVxuXG5leHBvcnQgZnVuY3Rpb24gb3Blbih7XG4gICAgdGl0bGUsXG4gICAgY29udGVudCxcbiAgICB0aW1lb3V0ID0gMzAwMFxufTogb3BlblByb3BzKSB7XG4gICAgLy8g5Yib5bu66IqC54K5XG4gICAgY29uc3QgcGFuZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIHBhbmVsLmNsYXNzTmFtZSA9ICdjaHJvbWUtbm90aWZpY2F0aW9uLXBhbmVsJ1xuXG4gICAgLy8g5Yib5bu6dGl0bGVcbiAgICBjb25zdCB0aXRsZUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICB0aXRsZUVsLmNsYXNzTmFtZSA9ICdjaHJvbWUtbm90aWZpY2F0aW9uLXBhbmVsLXRpdGxlJ1xuXG4gICAgLy8g5Yib5bu6dGl0bGXmloflrZdcbiAgICBjb25zdCB0aXRsZVRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJylcbiAgICB0aXRsZVRleHQuaW5uZXJUZXh0ID0gdGl0bGVcblxuICAgIC8vIOWIm+W7uuWFs+mXreaMiemSrlxuICAgIGNvbnN0IHRpdGxlQ2xvc2VCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpJylcbiAgICB0aXRsZUNsb3NlQnRuLmNsYXNzTmFtZSA9ICdjaHJvbWUtbm90aWZpY2F0aW9uLXBhbmVsLXRpdGxlLWNsb3NlJ1xuICAgIHRpdGxlQ2xvc2VCdG4uaW5uZXJUZXh0ID0gJ3gnXG4gICAgZnVuY3Rpb24gY2xvc2VOb3RpZmljYXRpb24oKSB7XG4gICAgICAgIHRpdGxlQ2xvc2VCdG4ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbG9zZU5vdGlmaWNhdGlvbilcbiAgICAgICAgY29uc3Qgd2lkdGggPSBwYW5lbC5jbGllbnRXaWR0aFxuXG4gICAgICAgIGxldCB0YXJnZXQgPSAwXG5cbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uIGNsb3NlQW5pbSgpIHtcbiAgICAgICAgICAgIHRhcmdldCArPSB3aWR0aCAvIDE3XG4gICAgICAgICAgICBwYW5lbC5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlWCgke3RhcmdldH1weClgXG4gICAgICAgICAgICBpZiAodGFyZ2V0IDwgd2lkdGggKyAxNikge1xuICAgICAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShjbG9zZUFuaW0pXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHBhbmVsLnJlbW92ZSgpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfVxuICAgIHRpdGxlQ2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbG9zZU5vdGlmaWNhdGlvbilcblxuICAgIC8vIOWIm+W7umNvbnRlbnRcbiAgICBjb25zdCBjb250ZW50RWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIGNvbnRlbnRFbC5jbGFzc05hbWUgPSAnY2hyb21lLW5vdGlmaWNhdGlvbi1wYW5lbC1jb250ZW50J1xuICAgIGNvbnRlbnRFbC5pbm5lckhUTUwgPSBjb250ZW50XG5cbiAgICB0aXRsZUVsLmFwcGVuZENoaWxkKHRpdGxlVGV4dClcbiAgICB0aXRsZUVsLmFwcGVuZENoaWxkKHRpdGxlQ2xvc2VCdG4pXG5cbiAgICBwYW5lbC5hcHBlbmRDaGlsZCh0aXRsZUVsKVxuICAgIHBhbmVsLmFwcGVuZENoaWxkKGNvbnRlbnRFbClcblxuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChwYW5lbClcblxuXG4gICAgY29uc3Qgd2lkdGggPSBwYW5lbC5jbGllbnRXaWR0aFxuICAgIHBhbmVsLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVYKCR7d2lkdGggKyAxNn1weClgXG4gICAgbGV0IHRhcmdldCA9IHdpZHRoICsgMTZcblxuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbiBvcGVuQW5pbSgpIHtcbiAgICAgICAgdGFyZ2V0IC09IHdpZHRoIC8gMTdcbiAgICAgICAgcGFuZWwuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVgoJHt0YXJnZXR9cHgpYFxuICAgICAgICBpZiAodGFyZ2V0ID4gMCkge1xuICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKG9wZW5BbmltKVxuICAgICAgICB9XG4gICAgfSlcblxuICAgIHNldFRpbWVvdXQoY2xvc2VOb3RpZmljYXRpb24sIHRpbWVvdXQpO1xufVxuXG5pbml0KCkiLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8qXG4gKiBhdXRob3I6IHdlbmR1eFxuICogZW1haWw6IDgyNDc4MzE0NkBxcS5jb21cbiAqIHNvdXJjZSBjb2RlOiBodHRwczovL2dpdGh1Yi5jb20vd2VuZHV4L0FqYXgtaG9va1xuICovXG5cbi8vIFNhdmUgb3JpZ2luYWwgWE1MSHR0cFJlcXVlc3QgYXMgX3J4aHJcbnZhciByZWFsWGhyID0gXCJfcnhoclwiXG5cbmV4cG9ydCB2YXIgZXZlbnRzID0gWydsb2FkJywgJ2xvYWRlbmQnLCAndGltZW91dCcsICdlcnJvcicsICdyZWFkeXN0YXRlY2hhbmdlJywgJ2Fib3J0J107XG5cbmV4cG9ydCBmdW5jdGlvbiBjb25maWdFdmVudChldmVudCwgeGhyUHJveHkpIHtcbiAgdmFyIGUgPSB7fTtcbiAgZm9yICh2YXIgYXR0ciBpbiBldmVudCkgZVthdHRyXSA9IGV2ZW50W2F0dHJdO1xuICAvLyB4aHJQcm94eSBpbnN0ZWFkXG4gIGUudGFyZ2V0ID0gZS5jdXJyZW50VGFyZ2V0ID0geGhyUHJveHlcbiAgcmV0dXJuIGU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBob29rKHByb3h5LCB3aW4pIHtcbiAgd2luID0gd2luIHx8IHdpbmRvdztcbiAgLy8gQXZvaWQgZG91YmxlIGhvb2tBamF4XG4gIHdpbltyZWFsWGhyXSA9IHdpbltyZWFsWGhyXSB8fCB3aW4uWE1MSHR0cFJlcXVlc3RcblxuICB3aW4uWE1MSHR0cFJlcXVlc3QgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAvLyBXZSBzaG91bGRuJ3QgaG9va0FqYXggWE1MSHR0cFJlcXVlc3QucHJvdG90eXBlIGJlY2F1c2Ugd2UgY2FuJ3RcbiAgICAvLyBndWFyYW50ZWUgdGhhdCBhbGwgYXR0cmlidXRlcyBhcmUgb24gdGhlIHByb3RvdHlwZeOAglxuICAgIC8vIEluc3RlYWQsIGhvb2tpbmcgWE1MSHR0cFJlcXVlc3QgaW5zdGFuY2UgY2FuIGF2b2lkIHRoaXMgcHJvYmxlbS5cblxuICAgIHZhciB4aHIgPSBuZXcgd2luW3JlYWxYaHJdO1xuXG5cbiAgICAvLyBHZW5lcmF0ZSBhbGwgY2FsbGJhY2tzKGVnLiBvbmxvYWQpIGFyZSBlbnVtZXJhYmxlIChub3QgdW5kZWZpbmVkKS5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGV2ZW50cy5sZW5ndGg7ICsraSkge1xuICAgICAgaWYgKHhocltldmVudHNbaV1dID09PSB1bmRlZmluZWQpIHhocltldmVudHNbaV1dID0gbnVsbDtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBhdHRyIGluIHhocikge1xuICAgICAgdmFyIHR5cGUgPSBcIlwiO1xuICAgICAgdHJ5IHtcbiAgICAgICAgdHlwZSA9IHR5cGVvZiB4aHJbYXR0cl0gLy8gTWF5IGNhdXNlIGV4Y2VwdGlvbiBvbiBzb21lIGJyb3dzZXJcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgLy8gaG9va0FqYXggbWV0aG9kcyBvZiB4aHIsIHN1Y2ggYXMgYG9wZW5g44CBYHNlbmRgIC4uLlxuICAgICAgICB0aGlzW2F0dHJdID0gaG9va0Z1bmN0aW9uKGF0dHIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIGF0dHIsIHtcbiAgICAgICAgICBnZXQ6IGdldHRlckZhY3RvcnkoYXR0ciksXG4gICAgICAgICAgc2V0OiBzZXR0ZXJGYWN0b3J5KGF0dHIpLFxuICAgICAgICAgIGVudW1lcmFibGU6IHRydWVcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgIHhoci5nZXRQcm94eSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGF0XG4gICAgfVxuICAgIHRoaXMueGhyID0geGhyO1xuICB9XG5cbiAgT2JqZWN0LmFzc2lnbih3aW4uWE1MSHR0cFJlcXVlc3QsIHtVTlNFTlQ6IDAsIE9QRU5FRDogMSwgSEVBREVSU19SRUNFSVZFRDogMiwgTE9BRElORzogMywgRE9ORTogNH0pO1xuXG4gIC8vIEdlbmVyYXRlIGdldHRlciBmb3IgYXR0cmlidXRlcyBvZiB4aHJcbiAgZnVuY3Rpb24gZ2V0dGVyRmFjdG9yeShhdHRyKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciB2ID0gdGhpcy5oYXNPd25Qcm9wZXJ0eShhdHRyICsgXCJfXCIpID8gdGhpc1thdHRyICsgXCJfXCJdIDogdGhpcy54aHJbYXR0cl07XG4gICAgICB2YXIgYXR0ckdldHRlckhvb2sgPSAocHJveHlbYXR0cl0gfHwge30pW1wiZ2V0dGVyXCJdXG4gICAgICByZXR1cm4gYXR0ckdldHRlckhvb2sgJiYgYXR0ckdldHRlckhvb2sodiwgdGhpcykgfHwgdlxuICAgIH1cbiAgfVxuXG4gIC8vIEdlbmVyYXRlIHNldHRlciBmb3IgYXR0cmlidXRlcyBvZiB4aHI7IGJ5IHRoaXMgd2UgaGF2ZSBhbiBvcHBvcnR1bml0eVxuICAvLyB0byBob29rQWpheCBldmVudCBjYWxsYmFja3Mg77yIZWc6IGBvbmxvYWRg77yJIG9mIHhocjtcbiAgZnVuY3Rpb24gc2V0dGVyRmFjdG9yeShhdHRyKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh2KSB7XG4gICAgICB2YXIgeGhyID0gdGhpcy54aHI7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICB2YXIgaG9vayA9IHByb3h5W2F0dHJdO1xuICAgICAgLy8gaG9va0FqYXggIGV2ZW50IGNhbGxiYWNrcyBzdWNoIGFzIGBvbmxvYWRg44CBYG9ucmVhZHlzdGF0ZWNoYW5nZWAuLi5cbiAgICAgIGlmIChhdHRyLnN1YnN0cmluZygwLCAyKSA9PT0gJ29uJykge1xuICAgICAgICB0aGF0W2F0dHIgKyBcIl9cIl0gPSB2O1xuICAgICAgICB4aHJbYXR0cl0gPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIGUgPSBjb25maWdFdmVudChlLCB0aGF0KVxuICAgICAgICAgIHZhciByZXQgPSBwcm94eVthdHRyXSAmJiBwcm94eVthdHRyXS5jYWxsKHRoYXQsIHhociwgZSlcbiAgICAgICAgICByZXQgfHwgdi5jYWxsKHRoYXQsIGUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvL0lmIHRoZSBhdHRyaWJ1dGUgaXNuJ3Qgd3JpdGFibGUsIGdlbmVyYXRlIHByb3h5IGF0dHJpYnV0ZVxuICAgICAgICB2YXIgYXR0clNldHRlckhvb2sgPSAoaG9vayB8fCB7fSlbXCJzZXR0ZXJcIl07XG4gICAgICAgIHYgPSBhdHRyU2V0dGVySG9vayAmJiBhdHRyU2V0dGVySG9vayh2LCB0aGF0KSB8fCB2XG4gICAgICAgIHRoaXNbYXR0ciArIFwiX1wiXSA9IHY7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gTm90IGFsbCBhdHRyaWJ1dGVzIG9mIHhociBhcmUgd3JpdGFibGUoc2V0dGVyIG1heSB1bmRlZmluZWQpLlxuICAgICAgICAgIHhoclthdHRyXSA9IHY7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIEhvb2sgbWV0aG9kcyBvZiB4aHIuXG4gIGZ1bmN0aW9uIGhvb2tGdW5jdGlvbihmdW4pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGFyZ3MgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cylcbiAgICAgIGlmIChwcm94eVtmdW5dKSB7XG4gICAgICAgIHZhciByZXQgPSBwcm94eVtmdW5dLmNhbGwodGhpcywgYXJncywgdGhpcy54aHIpXG4gICAgICAgIC8vIElmIHRoZSBwcm94eSByZXR1cm4gdmFsdWUgZXhpc3RzLCByZXR1cm4gaXQgZGlyZWN0bHksXG4gICAgICAgIC8vIG90aGVyd2lzZSBjYWxsIHRoZSBmdW5jdGlvbiBvZiB4aHIuXG4gICAgICAgIGlmIChyZXQpIHJldHVybiByZXQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy54aHJbZnVuXS5hcHBseSh0aGlzLnhociwgYXJncyk7XG4gICAgfVxuICB9XG5cbiAgLy8gUmV0dXJuIHRoZSByZWFsIFhNTEh0dHBSZXF1ZXN0XG4gIHJldHVybiB3aW5bcmVhbFhocl07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1bkhvb2sod2luKSB7XG4gIHdpbiA9IHdpbiB8fCB3aW5kb3dcbiAgaWYgKHdpbltyZWFsWGhyXSkgd2luLlhNTEh0dHBSZXF1ZXN0ID0gd2luW3JlYWxYaHJdO1xuICB3aW5bcmVhbFhocl0gPSB1bmRlZmluZWQ7XG59XG5cblxuIiwiLypcbiAqIGF1dGhvcjogd2VuZHV4XG4gKiBlbWFpbDogODI0NzgzMTQ2QHFxLmNvbVxuICogc291cmNlIGNvZGU6IGh0dHBzOi8vZ2l0aHViLmNvbS93ZW5kdXgvQWpheC1ob29rXG4gKi9cblxuaW1wb3J0IHtob29rLCB1bkhvb2ssIGNvbmZpZ0V2ZW50LCBldmVudHN9IGZyb20gXCIuL3hoci1ob29rXCI7XG5cbnZhciBldmVudExvYWQgPSBldmVudHNbMF0sXG4gIGV2ZW50TG9hZEVuZCA9IGV2ZW50c1sxXSxcbiAgZXZlbnRUaW1lb3V0ID0gZXZlbnRzWzJdLFxuICBldmVudEVycm9yID0gZXZlbnRzWzNdLFxuICBldmVudFJlYWR5U3RhdGVDaGFuZ2UgPSBldmVudHNbNF0sXG4gIGV2ZW50QWJvcnQgPSBldmVudHNbNV07XG5cblxudmFyIHNpbmdsZXRvbixcbiAgcHJvdG90eXBlID0gJ3Byb3RvdHlwZSc7XG5cblxuZXhwb3J0IGZ1bmN0aW9uIHByb3h5KHByb3h5KSB7XG4gIGlmIChzaW5nbGV0b24pIHRocm93IFwiUHJveHkgYWxyZWFkeSBleGlzdHNcIjtcbiAgcmV0dXJuIHNpbmdsZXRvbiA9IG5ldyBQcm94eShwcm94eSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1blByb3h5KHdpbikge1xuICBzaW5nbGV0b24gPSBudWxsXG4gIHVuSG9vayh3aW4pXG59XG5cbmZ1bmN0aW9uIHRyaW0oc3RyKSB7XG4gIHJldHVybiBzdHIucmVwbGFjZSgvXlxccyt8XFxzKyQvZywgJycpO1xufVxuXG5mdW5jdGlvbiBnZXRFdmVudFRhcmdldCh4aHIpIHtcbiAgcmV0dXJuIHhoci53YXRjaGVyIHx8ICh4aHIud2F0Y2hlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKSk7XG59XG5cbmZ1bmN0aW9uIHRyaWdnZXJMaXN0ZW5lcih4aHIsIG5hbWUpIHtcbiAgdmFyIHhoclByb3h5ID0geGhyLmdldFByb3h5KCk7XG4gIHZhciBjYWxsYmFjayA9ICdvbicgKyBuYW1lICsgJ18nO1xuICB2YXIgZXZlbnQgPSBjb25maWdFdmVudCh7dHlwZTogbmFtZX0sIHhoclByb3h5KTtcbiAgeGhyUHJveHlbY2FsbGJhY2tdICYmIHhoclByb3h5W2NhbGxiYWNrXShldmVudCk7XG4gIHZhciBldnQ7XG4gIGlmICh0eXBlb2YoRXZlbnQpID09PSAnZnVuY3Rpb24nKSB7XG4gICAgZXZ0ID0gbmV3IEV2ZW50KG5hbWUsIHtidWJibGVzOiBmYWxzZX0pO1xuICB9IGVsc2Uge1xuICAgIC8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzI3MTc2OTgzL2Rpc3BhdGNoZXZlbnQtbm90LXdvcmtpbmctaW4taWUxMVxuICAgIGV2dCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdFdmVudCcpO1xuICAgIGV2dC5pbml0RXZlbnQobmFtZSwgZmFsc2UsIHRydWUpO1xuICB9XG4gIGdldEV2ZW50VGFyZ2V0KHhocikuZGlzcGF0Y2hFdmVudChldnQpO1xufVxuXG5cbmZ1bmN0aW9uIEhhbmRsZXIoeGhyKSB7XG4gIHRoaXMueGhyID0geGhyO1xuICB0aGlzLnhoclByb3h5ID0geGhyLmdldFByb3h5KCk7XG59XG5cbkhhbmRsZXJbcHJvdG90eXBlXSA9IE9iamVjdC5jcmVhdGUoe1xuICByZXNvbHZlOiBmdW5jdGlvbiByZXNvbHZlKHJlc3BvbnNlKSB7XG4gICAgdmFyIHhoclByb3h5ID0gdGhpcy54aHJQcm94eTtcbiAgICB2YXIgeGhyID0gdGhpcy54aHI7XG4gICAgeGhyUHJveHkucmVhZHlTdGF0ZSA9IDQ7XG4gICAgeGhyLnJlc0hlYWRlciA9IHJlc3BvbnNlLmhlYWRlcnM7XG4gICAgeGhyUHJveHkucmVzcG9uc2UgPSB4aHJQcm94eS5yZXNwb25zZVRleHQgPSByZXNwb25zZS5yZXNwb25zZTtcbiAgICB4aHJQcm94eS5zdGF0dXNUZXh0ID0gcmVzcG9uc2Uuc3RhdHVzVGV4dDtcbiAgICB4aHJQcm94eS5zdGF0dXMgPSByZXNwb25zZS5zdGF0dXM7XG4gICAgdHJpZ2dlckxpc3RlbmVyKHhociwgZXZlbnRSZWFkeVN0YXRlQ2hhbmdlKTtcbiAgICB0cmlnZ2VyTGlzdGVuZXIoeGhyLCBldmVudExvYWQpO1xuICAgIHRyaWdnZXJMaXN0ZW5lcih4aHIsIGV2ZW50TG9hZEVuZCk7XG4gIH0sXG4gIHJlamVjdDogZnVuY3Rpb24gcmVqZWN0KGVycm9yKSB7XG4gICAgdGhpcy54aHJQcm94eS5zdGF0dXMgPSAwO1xuICAgIHRyaWdnZXJMaXN0ZW5lcih0aGlzLnhociwgZXJyb3IudHlwZSk7XG4gICAgdHJpZ2dlckxpc3RlbmVyKHRoaXMueGhyLCBldmVudExvYWRFbmQpO1xuICB9XG59KTtcblxuZnVuY3Rpb24gbWFrZUhhbmRsZXIobmV4dCkge1xuICBmdW5jdGlvbiBzdWIoeGhyKSB7XG4gICAgSGFuZGxlci5jYWxsKHRoaXMsIHhocik7XG4gIH1cblxuICBzdWJbcHJvdG90eXBlXSA9IE9iamVjdC5jcmVhdGUoSGFuZGxlcltwcm90b3R5cGVdKTtcbiAgc3ViW3Byb3RvdHlwZV0ubmV4dCA9IG5leHQ7XG4gIHJldHVybiBzdWI7XG59XG5cbnZhciBSZXF1ZXN0SGFuZGxlciA9IG1ha2VIYW5kbGVyKGZ1bmN0aW9uIChycSkge1xuICB2YXIgeGhyID0gdGhpcy54aHI7XG4gIHJxID0gcnEgfHwgeGhyLmNvbmZpZztcbiAgeGhyLndpdGhDcmVkZW50aWFscyA9IHJxLndpdGhDcmVkZW50aWFscztcbiAgeGhyLm9wZW4ocnEubWV0aG9kLCBycS51cmwsIHJxLmFzeW5jICE9PSBmYWxzZSwgcnEudXNlciwgcnEucGFzc3dvcmQpO1xuICBmb3IgKHZhciBrZXkgaW4gcnEuaGVhZGVycykge1xuICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKGtleSwgcnEuaGVhZGVyc1trZXldKTtcbiAgfVxuICB4aHIuc2VuZChycS5ib2R5KTtcbn0pO1xuXG52YXIgUmVzcG9uc2VIYW5kbGVyID0gbWFrZUhhbmRsZXIoZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gIHRoaXMucmVzb2x2ZShyZXNwb25zZSk7XG59KTtcblxudmFyIEVycm9ySGFuZGxlciA9IG1ha2VIYW5kbGVyKGZ1bmN0aW9uIChlcnJvcikge1xuICB0aGlzLnJlamVjdChlcnJvcik7XG59KTtcblxuZnVuY3Rpb24gUHJveHkocHJveHksIHdpbikge1xuICB2YXIgb25SZXF1ZXN0ID0gcHJveHkub25SZXF1ZXN0LFxuICAgIG9uUmVzcG9uc2UgPSBwcm94eS5vblJlc3BvbnNlLFxuICAgIG9uRXJyb3IgPSBwcm94eS5vbkVycm9yO1xuXG4gIGZ1bmN0aW9uIGhhbmRsZVJlc3BvbnNlKHhociwgeGhyUHJveHkpIHtcbiAgICB2YXIgaGFuZGxlciA9IG5ldyBSZXNwb25zZUhhbmRsZXIoeGhyKTtcbiAgICB2YXIgcmV0ID0ge1xuICAgICAgcmVzcG9uc2U6IHhoclByb3h5LnJlc3BvbnNlLFxuICAgICAgc3RhdHVzOiB4aHJQcm94eS5zdGF0dXMsXG4gICAgICBzdGF0dXNUZXh0OiB4aHJQcm94eS5zdGF0dXNUZXh0LFxuICAgICAgY29uZmlnOiB4aHIuY29uZmlnLFxuICAgICAgaGVhZGVyczogeGhyLnJlc0hlYWRlciB8fCB4aHIuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkuc3BsaXQoJ1xcclxcbicpLnJlZHVjZShmdW5jdGlvbiAob2IsIHN0cikge1xuICAgICAgICBpZiAoc3RyID09PSBcIlwiKSByZXR1cm4gb2I7XG4gICAgICAgIHZhciBtID0gc3RyLnNwbGl0KFwiOlwiKTtcbiAgICAgICAgb2JbbS5zaGlmdCgpXSA9IHRyaW0obS5qb2luKCc6JykpO1xuICAgICAgICByZXR1cm4gb2I7XG4gICAgICB9LCB7fSlcbiAgICB9O1xuICAgIGlmICghb25SZXNwb25zZSkgcmV0dXJuIGhhbmRsZXIucmVzb2x2ZShyZXQpO1xuICAgIG9uUmVzcG9uc2UocmV0LCBoYW5kbGVyKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uZXJyb3IoeGhyLCB4aHJQcm94eSwgZXJyb3IsIGVycm9yVHlwZSkge1xuICAgIHZhciBoYW5kbGVyID0gbmV3IEVycm9ySGFuZGxlcih4aHIpO1xuICAgIGVycm9yID0ge2NvbmZpZzogeGhyLmNvbmZpZywgZXJyb3I6IGVycm9yLCB0eXBlOiBlcnJvclR5cGV9O1xuICAgIGlmIChvbkVycm9yKSB7XG4gICAgICBvbkVycm9yKGVycm9yLCBoYW5kbGVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaGFuZGxlci5uZXh0KGVycm9yKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBwcmV2ZW50WGhyUHJveHlDYWxsYmFjaygpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2soZXJyb3JUeXBlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh4aHIsIGUpIHtcbiAgICAgIG9uZXJyb3IoeGhyLCB0aGlzLCBlLCBlcnJvclR5cGUpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc3RhdGVDaGFuZ2VDYWxsYmFjayh4aHIsIHhoclByb3h5KSB7XG4gICAgaWYgKHhoci5yZWFkeVN0YXRlID09PSA0ICYmIHhoci5zdGF0dXMgIT09IDApIHtcbiAgICAgIGhhbmRsZVJlc3BvbnNlKHhociwgeGhyUHJveHkpO1xuICAgIH0gZWxzZSBpZiAoeGhyLnJlYWR5U3RhdGUgIT09IDQpIHtcbiAgICAgIHRyaWdnZXJMaXN0ZW5lcih4aHIsIGV2ZW50UmVhZHlTdGF0ZUNoYW5nZSk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcmV0dXJuIGhvb2soe1xuICAgIG9ubG9hZDogcHJldmVudFhoclByb3h5Q2FsbGJhY2ssXG4gICAgb25sb2FkZW5kOiBwcmV2ZW50WGhyUHJveHlDYWxsYmFjayxcbiAgICBvbmVycm9yOiBlcnJvckNhbGxiYWNrKGV2ZW50RXJyb3IpLFxuICAgIG9udGltZW91dDogZXJyb3JDYWxsYmFjayhldmVudFRpbWVvdXQpLFxuICAgIG9uYWJvcnQ6IGVycm9yQ2FsbGJhY2soZXZlbnRBYm9ydCksXG4gICAgb25yZWFkeXN0YXRlY2hhbmdlOiBmdW5jdGlvbiAoeGhyKSB7XG4gICAgICByZXR1cm4gc3RhdGVDaGFuZ2VDYWxsYmFjayh4aHIsIHRoaXMpO1xuICAgIH0sXG4gICAgb3BlbjogZnVuY3Rpb24gb3BlbihhcmdzLCB4aHIpIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICB2YXIgY29uZmlnID0geGhyLmNvbmZpZyA9IHtoZWFkZXJzOiB7fX07XG4gICAgICBjb25maWcubWV0aG9kID0gYXJnc1swXTtcbiAgICAgIGNvbmZpZy51cmwgPSBhcmdzWzFdO1xuICAgICAgY29uZmlnLmFzeW5jID0gYXJnc1syXTtcbiAgICAgIGNvbmZpZy51c2VyID0gYXJnc1szXTtcbiAgICAgIGNvbmZpZy5wYXNzd29yZCA9IGFyZ3NbNF07XG4gICAgICBjb25maWcueGhyID0geGhyO1xuICAgICAgdmFyIGV2TmFtZSA9ICdvbicgKyBldmVudFJlYWR5U3RhdGVDaGFuZ2U7XG4gICAgICBpZiAoIXhocltldk5hbWVdKSB7XG4gICAgICAgIHhocltldk5hbWVdID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiBzdGF0ZUNoYW5nZUNhbGxiYWNrKHhociwgX3RoaXMpO1xuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICAvLyDlpoLmnpzmnInor7fmsYLmi6bmiKrlmajvvIzliJnlnKjosIPnlKhvblJlcXVlc3TlkI7lho3miZPlvIDpk77mjqXjgILlm6DkuLpvblJlcXVlc3TmnIDkvbPosIPnlKjml7bmnLrmmK/lnKhzZW5k5YmN77yMXG4gICAgICAvLyDmiYDku6XmiJHku6zlnKhzZW5k5oum5oiq5Ye95pWw5Lit5YaN5omL5Yqo6LCD55Sob3Blbu+8jOWboOatpOi/lOWbnnRydWXpmLvmraJ4aHIub3Blbuiwg+eUqOOAglxuICAgICAgLy9cbiAgICAgIC8vIOWmguaenOayoeacieivt+axguaLpuaIquWZqO+8jOWImeS4jeeUqOmYu+aWrXhoci5vcGVu6LCD55SoXG4gICAgICBpZiAob25SZXF1ZXN0KSByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuICAgIHNlbmQ6IGZ1bmN0aW9uIChhcmdzLCB4aHIpIHtcbiAgICAgIHZhciBjb25maWcgPSB4aHIuY29uZmlnXG4gICAgICBjb25maWcud2l0aENyZWRlbnRpYWxzID0geGhyLndpdGhDcmVkZW50aWFsc1xuICAgICAgY29uZmlnLmJvZHkgPSBhcmdzWzBdO1xuICAgICAgaWYgKG9uUmVxdWVzdCkge1xuICAgICAgICAvLyBJbiAnb25SZXF1ZXN0Jywgd2UgbWF5IGNhbGwgWEhSJ3MgZXZlbnQgaGFuZGxlciwgc3VjaCBhcyBgeGhyLm9ubG9hZGAuXG4gICAgICAgIC8vIEhvd2V2ZXIsIFhIUidzIGV2ZW50IGhhbmRsZXIgbWF5IG5vdCBiZSBzZXQgdW50aWwgeGhyLnNlbmQgaXMgY2FsbGVkIGluXG4gICAgICAgIC8vIHRoZSB1c2VyJ3MgY29kZSwgc28gd2UgdXNlIGBzZXRUaW1lb3V0YCB0byBhdm9pZCB0aGlzIHNpdHVhdGlvblxuICAgICAgICB2YXIgcmVxID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIG9uUmVxdWVzdChjb25maWcsIG5ldyBSZXF1ZXN0SGFuZGxlcih4aHIpKTtcbiAgICAgICAgfVxuICAgICAgICBjb25maWcuYXN5bmMgPT09IGZhbHNlID8gcmVxKCkgOiBzZXRUaW1lb3V0KHJlcSlcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfSxcbiAgICBzZXRSZXF1ZXN0SGVhZGVyOiBmdW5jdGlvbiAoYXJncywgeGhyKSB7XG4gICAgICAvLyBDb2xsZWN0IHJlcXVlc3QgaGVhZGVyc1xuICAgICAgeGhyLmNvbmZpZy5oZWFkZXJzW2FyZ3NbMF0udG9Mb3dlckNhc2UoKV0gPSBhcmdzWzFdO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSxcbiAgICBhZGRFdmVudExpc3RlbmVyOiBmdW5jdGlvbiAoYXJncywgeGhyKSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgaWYgKGV2ZW50cy5pbmRleE9mKGFyZ3NbMF0pICE9PSAtMSkge1xuICAgICAgICB2YXIgaGFuZGxlciA9IGFyZ3NbMV07XG4gICAgICAgIGdldEV2ZW50VGFyZ2V0KHhocikuYWRkRXZlbnRMaXN0ZW5lcihhcmdzWzBdLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIHZhciBldmVudCA9IGNvbmZpZ0V2ZW50KGUsIF90aGlzKTtcbiAgICAgICAgICBldmVudC50eXBlID0gYXJnc1swXTtcbiAgICAgICAgICBldmVudC5pc1RydXN0ZWQgPSB0cnVlO1xuICAgICAgICAgIGhhbmRsZXIuY2FsbChfdGhpcywgZXZlbnQpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfSxcbiAgICBnZXRBbGxSZXNwb25zZUhlYWRlcnM6IGZ1bmN0aW9uIChfLCB4aHIpIHtcbiAgICAgIHZhciBoZWFkZXJzID0geGhyLnJlc0hlYWRlclxuICAgICAgaWYgKGhlYWRlcnMpIHtcbiAgICAgICAgdmFyIGhlYWRlciA9IFwiXCI7XG4gICAgICAgIGZvciAodmFyIGtleSBpbiBoZWFkZXJzKSB7XG4gICAgICAgICAgaGVhZGVyICs9IGtleSArICc6ICcgKyBoZWFkZXJzW2tleV0gKyAnXFxyXFxuJztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaGVhZGVyO1xuICAgICAgfVxuICAgIH0sXG4gICAgZ2V0UmVzcG9uc2VIZWFkZXI6IGZ1bmN0aW9uIChhcmdzLCB4aHIpIHtcbiAgICAgIHZhciBoZWFkZXJzID0geGhyLnJlc0hlYWRlclxuICAgICAgaWYgKGhlYWRlcnMpIHtcbiAgICAgICAgcmV0dXJuIGhlYWRlcnNbKGFyZ3NbMF0gfHwgJycpLnRvTG93ZXJDYXNlKCldO1xuICAgICAgfVxuICAgIH1cbiAgfSwgd2luKTtcbn1cblxuXG5cblxuIiwiLy8gQHRzLW5vY2hlY2tcbmltcG9ydCB7IHByb3h5LCB1blByb3h5IH0gZnJvbSBcImFqYXgtaG9va1wiO1xuaW1wb3J0IHsgb3BlbiB9IGZyb20gJy4vbm90aWZpY2F0aW9uJ1xuXG5sZXQgbWF0Y2hpbmdzOiBNYXRjaGluZ0VudGl0eVtdID0gW11cblxucHJveHkoe1xuICAgIC8v6K+35rGC5Y+R6LW35YmN6L+b5YWlXG4gICAgb25SZXF1ZXN0OiBhc3luYyAoY29uZmlnLCBoYW5kbGVyKSA9PiB7XG4gICAgICAgIGZvciAoY29uc3QgbWF0Y2hpbmcgb2YgbWF0Y2hpbmdzKSB7XG4gICAgICAgICAgICBjb25zdCByZWdleHAgPSBuZXcgUmVnRXhwKG1hdGNoaW5nLnJlZ2V4cFN0cilcbiAgICAgICAgICAgIGlmIChyZWdleHAudGVzdChjb25maWcudXJsKSkge1xuICAgICAgICAgICAgICAgIG9wZW4oe1xuICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ3hocl9tb2NrX2V4dOaLpuaIquaPkOmGkicsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGAvPHNwYW4gc3R5bGU9XCJjb2xvcjpyZWRcIj4ke21hdGNoaW5nLnJlZ2V4cFN0cn08L3NwYW4+LyAs5bey6KKr5oum5oiqYFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBtYXRjaGluZ0hhbmRsZXIobWF0Y2hpbmcsIGNvbmZpZylcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlci5yZXNvbHZlKHtcbiAgICAgICAgICAgICAgICAgICAgY29uZmlnOiBjb25maWcsXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogMjAwLFxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdjb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04JyB9LFxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZTogcmVzcG9uc2VcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaGFuZGxlci5uZXh0KGNvbmZpZyk7XG4gICAgfVxufSlcblxuYXN5bmMgZnVuY3Rpb24gbWF0Y2hpbmdIYW5kbGVyKG1hdGNoaW5nOiBNYXRjaGluZ0VudGl0eSwgY29uZmlnKTogc3RyaW5nIHtcbiAgICBjb25zb2xlLmxvZyhtYXRjaGluZylcbiAgICBzd2l0Y2ggKG1hdGNoaW5nLm1vZGUpIHtcbiAgICAgICAgY2FzZSAwOiByZXR1cm4gbWF0Y2hpbmcucmVzSnNvbjtcbiAgICAgICAgY2FzZSAxOiByZXR1cm4gYXdhaXQgc2NyaXB0SGFuZGxlcihtYXRjaGluZywgY29uZmlnKVxuICAgIH1cbn1cblxuXG5hc3luYyBmdW5jdGlvbiBzY3JpcHRIYW5kbGVyKG1hdGNoaW5nOiBNYXRjaGluZ0VudGl0eSwgY29uZmlnKSB7XG4gICAgY29uc3QgbWlkZGxld2FyZSA9IG5ldyBGdW5jdGlvbihtYXRjaGluZy5yZXNTY3JpcHQpXG5cbiAgICByZXR1cm4gYXdhaXQgbWlkZGxld2FyZShjb25maWcpXG59XG5cblxuZnVuY3Rpb24gaW5pdCgpIHtcbiAgICBnZXRNYXRjaGluZ3MoKVxuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCAoZSkgPT4ge1xuICAgICAgICBjb25zdCB7IGRhdGEgfSA9IGVcblxuICAgICAgICBpZiAoZGF0YS5ldmVudCA9PT0gJ2luamVjdF9nZXRfbWF0Y2hpbmdfcmVzJykge1xuICAgICAgICAgICAgbWF0Y2hpbmdzID0gZS5kYXRhLmRhdGFcbiAgICAgICAgfVxuICAgIH0pXG59XG5cbmZ1bmN0aW9uIGdldE1hdGNoaW5ncygpIHtcbiAgICB3aW5kb3cucG9zdE1lc3NhZ2Uoe1xuICAgICAgICBldmVudDogJ2luamVjdF9nZXRfbWF0Y2hpbmcnLFxuICAgICAgICBkYXRhOiBudWxsXG4gICAgfSlcbn1cblxuaW5pdCgpIl0sIm5hbWVzIjpbImNvbnRhaW5lciIsIm9wZW4iLCJ0aXRsZSIsImNvbnRlbnQiLCJ0aW1lb3V0IiwicGFuZWwiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJ0aXRsZUVsIiwidGl0bGVUZXh0IiwiaW5uZXJUZXh0IiwidGl0bGVDbG9zZUJ0biIsImNsb3NlTm90aWZpY2F0aW9uIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIndpZHRoIiwiY2xpZW50V2lkdGgiLCJ0YXJnZXQiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJjbG9zZUFuaW0iLCJzdHlsZSIsInRyYW5zZm9ybSIsInJlbW92ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJjb250ZW50RWwiLCJpbm5lckhUTUwiLCJhcHBlbmRDaGlsZCIsIm9wZW5BbmltIiwic2V0VGltZW91dCIsImJvZHkiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJleHBvcnRzIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImQiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJldmVudHMiLCJjb25maWdFdmVudCIsImV2ZW50IiwieGhyUHJveHkiLCJlIiwiYXR0ciIsImN1cnJlbnRUYXJnZXQiLCJzaW5nbGV0b24iLCJldmVudExvYWQiLCJldmVudExvYWRFbmQiLCJldmVudFRpbWVvdXQiLCJldmVudEVycm9yIiwiZXZlbnRSZWFkeVN0YXRlQ2hhbmdlIiwiZXZlbnRBYm9ydCIsImdldEV2ZW50VGFyZ2V0IiwieGhyIiwid2F0Y2hlciIsInRyaWdnZXJMaXN0ZW5lciIsIm5hbWUiLCJldnQiLCJnZXRQcm94eSIsImNhbGxiYWNrIiwidHlwZSIsIkV2ZW50IiwiYnViYmxlcyIsImNyZWF0ZUV2ZW50IiwiaW5pdEV2ZW50IiwiZGlzcGF0Y2hFdmVudCIsIkhhbmRsZXIiLCJ0aGlzIiwibWFrZUhhbmRsZXIiLCJuZXh0Iiwic3ViIiwiY3JlYXRlIiwicmVzb2x2ZSIsInJlc3BvbnNlIiwicmVhZHlTdGF0ZSIsInJlc0hlYWRlciIsImhlYWRlcnMiLCJyZXNwb25zZVRleHQiLCJzdGF0dXNUZXh0Iiwic3RhdHVzIiwicmVqZWN0IiwiZXJyb3IiLCJSZXF1ZXN0SGFuZGxlciIsInJxIiwiY29uZmlnIiwid2l0aENyZWRlbnRpYWxzIiwibWV0aG9kIiwidXJsIiwiYXN5bmMiLCJ1c2VyIiwicGFzc3dvcmQiLCJzZXRSZXF1ZXN0SGVhZGVyIiwic2VuZCIsIlJlc3BvbnNlSGFuZGxlciIsIkVycm9ySGFuZGxlciIsIlByb3h5IiwicHJveHkiLCJ3aW4iLCJvblJlcXVlc3QiLCJvblJlc3BvbnNlIiwib25FcnJvciIsInByZXZlbnRYaHJQcm94eUNhbGxiYWNrIiwiZXJyb3JDYWxsYmFjayIsImVycm9yVHlwZSIsImhhbmRsZXIiLCJvbmVycm9yIiwic3RhdGVDaGFuZ2VDYWxsYmFjayIsInJldCIsImdldEFsbFJlc3BvbnNlSGVhZGVycyIsInNwbGl0IiwicmVkdWNlIiwib2IiLCJzdHIiLCJtIiwic2hpZnQiLCJyZXBsYWNlIiwidHJpbSIsImpvaW4iLCJoYW5kbGVSZXNwb25zZSIsImdldHRlckZhY3RvcnkiLCJ2IiwiYXR0ckdldHRlckhvb2siLCJzZXR0ZXJGYWN0b3J5IiwidGhhdCIsImhvb2siLCJzdWJzdHJpbmciLCJhdHRyU2V0dGVySG9vayIsImhvb2tGdW5jdGlvbiIsImZ1biIsImFyZ3MiLCJzbGljZSIsImFyZ3VtZW50cyIsImFwcGx5Iiwid2luZG93IiwiWE1MSHR0cFJlcXVlc3QiLCJpIiwibGVuZ3RoIiwic2V0IiwiYXNzaWduIiwiVU5TRU5UIiwiT1BFTkVEIiwiSEVBREVSU19SRUNFSVZFRCIsIkxPQURJTkciLCJET05FIiwib25sb2FkIiwib25sb2FkZW5kIiwib250aW1lb3V0Iiwib25hYm9ydCIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsIl90aGlzIiwiZXZOYW1lIiwicmVxIiwidG9Mb3dlckNhc2UiLCJpbmRleE9mIiwiaXNUcnVzdGVkIiwiXyIsImhlYWRlciIsImdldFJlc3BvbnNlSGVhZGVyIiwibWF0Y2hpbmdzIiwibWF0Y2hpbmdIYW5kbGVyIiwibWF0Y2hpbmciLCJjb25zb2xlIiwibG9nIiwibW9kZSIsInJlc0pzb24iLCJzY3JpcHRIYW5kbGVyIiwiRnVuY3Rpb24iLCJyZXNTY3JpcHQiLCJtaWRkbGV3YXJlIiwiUmVnRXhwIiwicmVnZXhwU3RyIiwidGVzdCIsInBvc3RNZXNzYWdlIiwiZGF0YSJdLCJzb3VyY2VSb290IjoiIn0=