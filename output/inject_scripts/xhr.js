(()=>{"use strict";var t=["load","loadend","timeout","error","readystatechange","abort"];function e(t,e){var r={};for(var n in t)r[n]=t[n];return r.target=r.currentTarget=e,r}var r,n=t[0],o=t[1],s=t[2],i=t[3],a=t[4],u=t[5];function c(t){return t.watcher||(t.watcher=document.createElement("a"))}function f(t,r){var n,o=t.getProxy(),s="on"+r+"_",i=e({type:r},o);o[s]&&o[s](i),"function"==typeof Event?n=new Event(r,{bubbles:!1}):(n=document.createEvent("Event")).initEvent(r,!1,!0),c(t).dispatchEvent(n)}function h(t){this.xhr=t,this.xhrProxy=t.getProxy()}function d(t){function e(t){h.call(this,t)}return e.prototype=Object.create(h.prototype),e.prototype.next=t,e}h.prototype=Object.create({resolve:function(t){var e=this.xhrProxy,r=this.xhr;e.readyState=4,r.resHeader=t.headers,e.response=e.responseText=t.response,e.statusText=t.statusText,e.status=t.status,f(r,a),f(r,n),f(r,o)},reject:function(t){this.xhrProxy.status=0,f(this.xhr,t.type),f(this.xhr,o)}});var l=d((function(t){var e=this.xhr;for(var r in t=t||e.config,e.withCredentials=t.withCredentials,e.open(t.method,t.url,!1!==t.async,t.user,t.password),t.headers)e.setRequestHeader(r,t.headers[r]);e.send(t.body)})),v=d((function(t){this.resolve(t)})),p=d((function(t){this.reject(t)}));function y(r,n){var o=r.onRequest,h=r.onResponse,d=r.onError;function y(){return!0}function x(t){return function(e,r){return function(t,e,r,n){var o=new p(t);r={config:t.config,error:r,type:n},d?d(r,o):o.next(r)}(e,0,r,t),!0}}function g(t,e){return 4===t.readyState&&0!==t.status?function(t,e){var r=new v(t),n={response:e.response,status:e.status,statusText:e.statusText,config:t.config,headers:t.resHeader||t.getAllResponseHeaders().split("\r\n").reduce((function(t,e){if(""===e)return t;var r=e.split(":");return t[r.shift()]=function(t){return t.replace(/^\s+|\s+$/g,"")}(r.join(":")),t}),{})};if(!h)return r.resolve(n);h(n,r)}(t,e):4!==t.readyState&&f(t,a),!0}return function(r,n){function o(t){return function(){var e=this.hasOwnProperty(t+"_")?this[t+"_"]:this.xhr[t],n=(r[t]||{}).getter;return n&&n(e,this)||e}}function s(t){return function(n){var o=this.xhr,s=this,i=r[t];if("on"===t.substring(0,2))s[t+"_"]=n,o[t]=function(i){i=e(i,s),r[t]&&r[t].call(s,o,i)||n.call(s,i)};else{var a=(i||{}).setter;n=a&&a(n,s)||n,this[t+"_"]=n;try{o[t]=n}catch(t){}}}}function i(t){return function(){var e=[].slice.call(arguments);if(r[t]){var n=r[t].call(this,e,this.xhr);if(n)return n}return this.xhr[t].apply(this.xhr,e)}}return(n=n||window)._rxhr=n._rxhr||n.XMLHttpRequest,n.XMLHttpRequest=function(){for(var e=new n._rxhr,r=0;r<t.length;++r)void 0===e[t[r]]&&(e[t[r]]=null);for(var a in e){var u="";try{u=typeof e[a]}catch(t){}"function"===u?this[a]=i(a):Object.defineProperty(this,a,{get:o(a),set:s(a),enumerable:!0})}var c=this;e.getProxy=function(){return c},this.xhr=e},Object.assign(n.XMLHttpRequest,{UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4}),n._rxhr}({onload:y,onloadend:y,onerror:x(i),ontimeout:x(s),onabort:x(u),onreadystatechange:function(t){return g(t,this)},open:function(t,e){var r=this,n=e.config={headers:{}};n.method=t[0],n.url=t[1],n.async=t[2],n.user=t[3],n.password=t[4],n.xhr=e;var s="on"+a;if(e[s]||(e[s]=function(){return g(e,r)}),o)return!0},send:function(t,e){var r=e.config;if(r.withCredentials=e.withCredentials,r.body=t[0],o){var n=function(){o(r,new l(e))};return!1===r.async?n():setTimeout(n),!0}},setRequestHeader:function(t,e){return e.config.headers[t[0].toLowerCase()]=t[1],!0},addEventListener:function(r,n){var o=this;if(-1!==t.indexOf(r[0])){var s=r[1];return c(n).addEventListener(r[0],(function(t){var n=e(t,o);n.type=r[0],n.isTrusted=!0,s.call(o,n)})),!0}},getAllResponseHeaders:function(t,e){var r=e.resHeader;if(r){var n="";for(var o in r)n+=o+": "+r[o]+"\r\n";return n}},getResponseHeader:function(t,e){var r=e.resHeader;if(r)return r[(t[0]||"").toLowerCase()]}},n)}var x=[];!function(t){if(r)throw"Proxy already exists";r=new y(t)}({onRequest:function(t,e){var r,n;try{for(var o=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(x),s=o.next();!s.done;s=o.next()){var i=s.value;if(new RegExp(i.regexpStr).test(t.url))return e.resolve({config:t,status:200,headers:{"content-type":"application/json;charset=UTF-8"},response:i.resJson})}}catch(t){r={error:t}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}e.next(t)}}),window.postMessage({event:"inject_get_matching",data:null}),window.addEventListener("message",(function(t){"inject_get_matching_res"===t.data.event&&(x=t.data.data)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RixPQUFPQSxHQUFTeUQsRUFBSyxJQUFNLElBQUk0QixpQkFHbEM3RCxHLElDL09Eb0UsRUFBOEIsSURpQjNCLFNBQWVyRSxHQUNwQixHQUFJMUQsRUFBVyxLQUFNLHVCQUNkQSxFQUFZLElBQUl5RCxFQUFNQyxHQ2pCL0JBLENBQU0sQ0FFRkUsVUFBVyxTQUFDaEIsRUFBUXNCLEcsWUFDaEIsSUFBdUIsTSx5U0FBQSxDQUFBNkQsR0FBUyw4QkFBRSxDQUE3QixJQUFNLEVBQVEsUUFFZixHQURlLElBQUlDLE9BQU8sRUFBU0MsV0FDeEJDLEtBQUt0RixFQUFPSSxLQUNuQixPQUFPa0IsRUFBUW5DLFFBQVEsQ0FDbkJhLE9BQVFBLEVBQ1JOLE9BQVEsSUFDUkgsUUFBUyxDQUFFLGVBQWdCLGtDQUMzQkgsU0FBVSxFQUFTbUcsVyxpR0FLL0JqRSxFQUFReEMsS0FBS2tCLE1BaUJqQm9ELE9BQU9vQyxZQUFZLENBQ2YxSSxNQUFPLHNCQUNQMkksS0FBTSxPQVpWckMsT0FBT3lCLGlCQUFpQixXQUFXLFNBQUM3SCxHQUdiLDRCQUZGQSxFQUFDLEtBRVRGLFFBQ0xxSSxFQUFZbkksRUFBRXlJLEtBQUtBLFUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly94aHItbW9jay1leHQvLi9ub2RlX21vZHVsZXMvYWpheC1ob29rL3NyYy94aHItaG9vay5qcyIsIndlYnBhY2s6Ly94aHItbW9jay1leHQvLi9ub2RlX21vZHVsZXMvYWpheC1ob29rL3NyYy94aHItcHJveHkuanMiLCJ3ZWJwYWNrOi8veGhyLW1vY2stZXh0Ly4vc3JjL2VudHJpZXMvaW5qZWN0X3NjcmlwdHMveGhyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBhdXRob3I6IHdlbmR1eFxuICogZW1haWw6IDgyNDc4MzE0NkBxcS5jb21cbiAqIHNvdXJjZSBjb2RlOiBodHRwczovL2dpdGh1Yi5jb20vd2VuZHV4L0FqYXgtaG9va1xuICovXG5cbi8vIFNhdmUgb3JpZ2luYWwgWE1MSHR0cFJlcXVlc3QgYXMgX3J4aHJcbnZhciByZWFsWGhyID0gXCJfcnhoclwiXG5cbmV4cG9ydCB2YXIgZXZlbnRzID0gWydsb2FkJywgJ2xvYWRlbmQnLCAndGltZW91dCcsICdlcnJvcicsICdyZWFkeXN0YXRlY2hhbmdlJywgJ2Fib3J0J107XG5cbmV4cG9ydCBmdW5jdGlvbiBjb25maWdFdmVudChldmVudCwgeGhyUHJveHkpIHtcbiAgdmFyIGUgPSB7fTtcbiAgZm9yICh2YXIgYXR0ciBpbiBldmVudCkgZVthdHRyXSA9IGV2ZW50W2F0dHJdO1xuICAvLyB4aHJQcm94eSBpbnN0ZWFkXG4gIGUudGFyZ2V0ID0gZS5jdXJyZW50VGFyZ2V0ID0geGhyUHJveHlcbiAgcmV0dXJuIGU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBob29rKHByb3h5LCB3aW4pIHtcbiAgd2luID0gd2luIHx8IHdpbmRvdztcbiAgLy8gQXZvaWQgZG91YmxlIGhvb2tBamF4XG4gIHdpbltyZWFsWGhyXSA9IHdpbltyZWFsWGhyXSB8fCB3aW4uWE1MSHR0cFJlcXVlc3RcblxuICB3aW4uWE1MSHR0cFJlcXVlc3QgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAvLyBXZSBzaG91bGRuJ3QgaG9va0FqYXggWE1MSHR0cFJlcXVlc3QucHJvdG90eXBlIGJlY2F1c2Ugd2UgY2FuJ3RcbiAgICAvLyBndWFyYW50ZWUgdGhhdCBhbGwgYXR0cmlidXRlcyBhcmUgb24gdGhlIHByb3RvdHlwZeOAglxuICAgIC8vIEluc3RlYWQsIGhvb2tpbmcgWE1MSHR0cFJlcXVlc3QgaW5zdGFuY2UgY2FuIGF2b2lkIHRoaXMgcHJvYmxlbS5cblxuICAgIHZhciB4aHIgPSBuZXcgd2luW3JlYWxYaHJdO1xuXG5cbiAgICAvLyBHZW5lcmF0ZSBhbGwgY2FsbGJhY2tzKGVnLiBvbmxvYWQpIGFyZSBlbnVtZXJhYmxlIChub3QgdW5kZWZpbmVkKS5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGV2ZW50cy5sZW5ndGg7ICsraSkge1xuICAgICAgaWYgKHhocltldmVudHNbaV1dID09PSB1bmRlZmluZWQpIHhocltldmVudHNbaV1dID0gbnVsbDtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBhdHRyIGluIHhocikge1xuICAgICAgdmFyIHR5cGUgPSBcIlwiO1xuICAgICAgdHJ5IHtcbiAgICAgICAgdHlwZSA9IHR5cGVvZiB4aHJbYXR0cl0gLy8gTWF5IGNhdXNlIGV4Y2VwdGlvbiBvbiBzb21lIGJyb3dzZXJcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgLy8gaG9va0FqYXggbWV0aG9kcyBvZiB4aHIsIHN1Y2ggYXMgYG9wZW5g44CBYHNlbmRgIC4uLlxuICAgICAgICB0aGlzW2F0dHJdID0gaG9va0Z1bmN0aW9uKGF0dHIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIGF0dHIsIHtcbiAgICAgICAgICBnZXQ6IGdldHRlckZhY3RvcnkoYXR0ciksXG4gICAgICAgICAgc2V0OiBzZXR0ZXJGYWN0b3J5KGF0dHIpLFxuICAgICAgICAgIGVudW1lcmFibGU6IHRydWVcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgIHhoci5nZXRQcm94eSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGF0XG4gICAgfVxuICAgIHRoaXMueGhyID0geGhyO1xuICB9XG5cbiAgT2JqZWN0LmFzc2lnbih3aW4uWE1MSHR0cFJlcXVlc3QsIHtVTlNFTlQ6IDAsIE9QRU5FRDogMSwgSEVBREVSU19SRUNFSVZFRDogMiwgTE9BRElORzogMywgRE9ORTogNH0pO1xuXG4gIC8vIEdlbmVyYXRlIGdldHRlciBmb3IgYXR0cmlidXRlcyBvZiB4aHJcbiAgZnVuY3Rpb24gZ2V0dGVyRmFjdG9yeShhdHRyKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciB2ID0gdGhpcy5oYXNPd25Qcm9wZXJ0eShhdHRyICsgXCJfXCIpID8gdGhpc1thdHRyICsgXCJfXCJdIDogdGhpcy54aHJbYXR0cl07XG4gICAgICB2YXIgYXR0ckdldHRlckhvb2sgPSAocHJveHlbYXR0cl0gfHwge30pW1wiZ2V0dGVyXCJdXG4gICAgICByZXR1cm4gYXR0ckdldHRlckhvb2sgJiYgYXR0ckdldHRlckhvb2sodiwgdGhpcykgfHwgdlxuICAgIH1cbiAgfVxuXG4gIC8vIEdlbmVyYXRlIHNldHRlciBmb3IgYXR0cmlidXRlcyBvZiB4aHI7IGJ5IHRoaXMgd2UgaGF2ZSBhbiBvcHBvcnR1bml0eVxuICAvLyB0byBob29rQWpheCBldmVudCBjYWxsYmFja3Mg77yIZWc6IGBvbmxvYWRg77yJIG9mIHhocjtcbiAgZnVuY3Rpb24gc2V0dGVyRmFjdG9yeShhdHRyKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh2KSB7XG4gICAgICB2YXIgeGhyID0gdGhpcy54aHI7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICB2YXIgaG9vayA9IHByb3h5W2F0dHJdO1xuICAgICAgLy8gaG9va0FqYXggIGV2ZW50IGNhbGxiYWNrcyBzdWNoIGFzIGBvbmxvYWRg44CBYG9ucmVhZHlzdGF0ZWNoYW5nZWAuLi5cbiAgICAgIGlmIChhdHRyLnN1YnN0cmluZygwLCAyKSA9PT0gJ29uJykge1xuICAgICAgICB0aGF0W2F0dHIgKyBcIl9cIl0gPSB2O1xuICAgICAgICB4aHJbYXR0cl0gPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIGUgPSBjb25maWdFdmVudChlLCB0aGF0KVxuICAgICAgICAgIHZhciByZXQgPSBwcm94eVthdHRyXSAmJiBwcm94eVthdHRyXS5jYWxsKHRoYXQsIHhociwgZSlcbiAgICAgICAgICByZXQgfHwgdi5jYWxsKHRoYXQsIGUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvL0lmIHRoZSBhdHRyaWJ1dGUgaXNuJ3Qgd3JpdGFibGUsIGdlbmVyYXRlIHByb3h5IGF0dHJpYnV0ZVxuICAgICAgICB2YXIgYXR0clNldHRlckhvb2sgPSAoaG9vayB8fCB7fSlbXCJzZXR0ZXJcIl07XG4gICAgICAgIHYgPSBhdHRyU2V0dGVySG9vayAmJiBhdHRyU2V0dGVySG9vayh2LCB0aGF0KSB8fCB2XG4gICAgICAgIHRoaXNbYXR0ciArIFwiX1wiXSA9IHY7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gTm90IGFsbCBhdHRyaWJ1dGVzIG9mIHhociBhcmUgd3JpdGFibGUoc2V0dGVyIG1heSB1bmRlZmluZWQpLlxuICAgICAgICAgIHhoclthdHRyXSA9IHY7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIEhvb2sgbWV0aG9kcyBvZiB4aHIuXG4gIGZ1bmN0aW9uIGhvb2tGdW5jdGlvbihmdW4pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGFyZ3MgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cylcbiAgICAgIGlmIChwcm94eVtmdW5dKSB7XG4gICAgICAgIHZhciByZXQgPSBwcm94eVtmdW5dLmNhbGwodGhpcywgYXJncywgdGhpcy54aHIpXG4gICAgICAgIC8vIElmIHRoZSBwcm94eSByZXR1cm4gdmFsdWUgZXhpc3RzLCByZXR1cm4gaXQgZGlyZWN0bHksXG4gICAgICAgIC8vIG90aGVyd2lzZSBjYWxsIHRoZSBmdW5jdGlvbiBvZiB4aHIuXG4gICAgICAgIGlmIChyZXQpIHJldHVybiByZXQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy54aHJbZnVuXS5hcHBseSh0aGlzLnhociwgYXJncyk7XG4gICAgfVxuICB9XG5cbiAgLy8gUmV0dXJuIHRoZSByZWFsIFhNTEh0dHBSZXF1ZXN0XG4gIHJldHVybiB3aW5bcmVhbFhocl07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1bkhvb2sod2luKSB7XG4gIHdpbiA9IHdpbiB8fCB3aW5kb3dcbiAgaWYgKHdpbltyZWFsWGhyXSkgd2luLlhNTEh0dHBSZXF1ZXN0ID0gd2luW3JlYWxYaHJdO1xuICB3aW5bcmVhbFhocl0gPSB1bmRlZmluZWQ7XG59XG5cblxuIiwiLypcbiAqIGF1dGhvcjogd2VuZHV4XG4gKiBlbWFpbDogODI0NzgzMTQ2QHFxLmNvbVxuICogc291cmNlIGNvZGU6IGh0dHBzOi8vZ2l0aHViLmNvbS93ZW5kdXgvQWpheC1ob29rXG4gKi9cblxuaW1wb3J0IHtob29rLCB1bkhvb2ssIGNvbmZpZ0V2ZW50LCBldmVudHN9IGZyb20gXCIuL3hoci1ob29rXCI7XG5cbnZhciBldmVudExvYWQgPSBldmVudHNbMF0sXG4gIGV2ZW50TG9hZEVuZCA9IGV2ZW50c1sxXSxcbiAgZXZlbnRUaW1lb3V0ID0gZXZlbnRzWzJdLFxuICBldmVudEVycm9yID0gZXZlbnRzWzNdLFxuICBldmVudFJlYWR5U3RhdGVDaGFuZ2UgPSBldmVudHNbNF0sXG4gIGV2ZW50QWJvcnQgPSBldmVudHNbNV07XG5cblxudmFyIHNpbmdsZXRvbixcbiAgcHJvdG90eXBlID0gJ3Byb3RvdHlwZSc7XG5cblxuZXhwb3J0IGZ1bmN0aW9uIHByb3h5KHByb3h5KSB7XG4gIGlmIChzaW5nbGV0b24pIHRocm93IFwiUHJveHkgYWxyZWFkeSBleGlzdHNcIjtcbiAgcmV0dXJuIHNpbmdsZXRvbiA9IG5ldyBQcm94eShwcm94eSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1blByb3h5KHdpbikge1xuICBzaW5nbGV0b24gPSBudWxsXG4gIHVuSG9vayh3aW4pXG59XG5cbmZ1bmN0aW9uIHRyaW0oc3RyKSB7XG4gIHJldHVybiBzdHIucmVwbGFjZSgvXlxccyt8XFxzKyQvZywgJycpO1xufVxuXG5mdW5jdGlvbiBnZXRFdmVudFRhcmdldCh4aHIpIHtcbiAgcmV0dXJuIHhoci53YXRjaGVyIHx8ICh4aHIud2F0Y2hlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKSk7XG59XG5cbmZ1bmN0aW9uIHRyaWdnZXJMaXN0ZW5lcih4aHIsIG5hbWUpIHtcbiAgdmFyIHhoclByb3h5ID0geGhyLmdldFByb3h5KCk7XG4gIHZhciBjYWxsYmFjayA9ICdvbicgKyBuYW1lICsgJ18nO1xuICB2YXIgZXZlbnQgPSBjb25maWdFdmVudCh7dHlwZTogbmFtZX0sIHhoclByb3h5KTtcbiAgeGhyUHJveHlbY2FsbGJhY2tdICYmIHhoclByb3h5W2NhbGxiYWNrXShldmVudCk7XG4gIHZhciBldnQ7XG4gIGlmICh0eXBlb2YoRXZlbnQpID09PSAnZnVuY3Rpb24nKSB7XG4gICAgZXZ0ID0gbmV3IEV2ZW50KG5hbWUsIHtidWJibGVzOiBmYWxzZX0pO1xuICB9IGVsc2Uge1xuICAgIC8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzI3MTc2OTgzL2Rpc3BhdGNoZXZlbnQtbm90LXdvcmtpbmctaW4taWUxMVxuICAgIGV2dCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdFdmVudCcpO1xuICAgIGV2dC5pbml0RXZlbnQobmFtZSwgZmFsc2UsIHRydWUpO1xuICB9XG4gIGdldEV2ZW50VGFyZ2V0KHhocikuZGlzcGF0Y2hFdmVudChldnQpO1xufVxuXG5cbmZ1bmN0aW9uIEhhbmRsZXIoeGhyKSB7XG4gIHRoaXMueGhyID0geGhyO1xuICB0aGlzLnhoclByb3h5ID0geGhyLmdldFByb3h5KCk7XG59XG5cbkhhbmRsZXJbcHJvdG90eXBlXSA9IE9iamVjdC5jcmVhdGUoe1xuICByZXNvbHZlOiBmdW5jdGlvbiByZXNvbHZlKHJlc3BvbnNlKSB7XG4gICAgdmFyIHhoclByb3h5ID0gdGhpcy54aHJQcm94eTtcbiAgICB2YXIgeGhyID0gdGhpcy54aHI7XG4gICAgeGhyUHJveHkucmVhZHlTdGF0ZSA9IDQ7XG4gICAgeGhyLnJlc0hlYWRlciA9IHJlc3BvbnNlLmhlYWRlcnM7XG4gICAgeGhyUHJveHkucmVzcG9uc2UgPSB4aHJQcm94eS5yZXNwb25zZVRleHQgPSByZXNwb25zZS5yZXNwb25zZTtcbiAgICB4aHJQcm94eS5zdGF0dXNUZXh0ID0gcmVzcG9uc2Uuc3RhdHVzVGV4dDtcbiAgICB4aHJQcm94eS5zdGF0dXMgPSByZXNwb25zZS5zdGF0dXM7XG4gICAgdHJpZ2dlckxpc3RlbmVyKHhociwgZXZlbnRSZWFkeVN0YXRlQ2hhbmdlKTtcbiAgICB0cmlnZ2VyTGlzdGVuZXIoeGhyLCBldmVudExvYWQpO1xuICAgIHRyaWdnZXJMaXN0ZW5lcih4aHIsIGV2ZW50TG9hZEVuZCk7XG4gIH0sXG4gIHJlamVjdDogZnVuY3Rpb24gcmVqZWN0KGVycm9yKSB7XG4gICAgdGhpcy54aHJQcm94eS5zdGF0dXMgPSAwO1xuICAgIHRyaWdnZXJMaXN0ZW5lcih0aGlzLnhociwgZXJyb3IudHlwZSk7XG4gICAgdHJpZ2dlckxpc3RlbmVyKHRoaXMueGhyLCBldmVudExvYWRFbmQpO1xuICB9XG59KTtcblxuZnVuY3Rpb24gbWFrZUhhbmRsZXIobmV4dCkge1xuICBmdW5jdGlvbiBzdWIoeGhyKSB7XG4gICAgSGFuZGxlci5jYWxsKHRoaXMsIHhocik7XG4gIH1cblxuICBzdWJbcHJvdG90eXBlXSA9IE9iamVjdC5jcmVhdGUoSGFuZGxlcltwcm90b3R5cGVdKTtcbiAgc3ViW3Byb3RvdHlwZV0ubmV4dCA9IG5leHQ7XG4gIHJldHVybiBzdWI7XG59XG5cbnZhciBSZXF1ZXN0SGFuZGxlciA9IG1ha2VIYW5kbGVyKGZ1bmN0aW9uIChycSkge1xuICB2YXIgeGhyID0gdGhpcy54aHI7XG4gIHJxID0gcnEgfHwgeGhyLmNvbmZpZztcbiAgeGhyLndpdGhDcmVkZW50aWFscyA9IHJxLndpdGhDcmVkZW50aWFscztcbiAgeGhyLm9wZW4ocnEubWV0aG9kLCBycS51cmwsIHJxLmFzeW5jICE9PSBmYWxzZSwgcnEudXNlciwgcnEucGFzc3dvcmQpO1xuICBmb3IgKHZhciBrZXkgaW4gcnEuaGVhZGVycykge1xuICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKGtleSwgcnEuaGVhZGVyc1trZXldKTtcbiAgfVxuICB4aHIuc2VuZChycS5ib2R5KTtcbn0pO1xuXG52YXIgUmVzcG9uc2VIYW5kbGVyID0gbWFrZUhhbmRsZXIoZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gIHRoaXMucmVzb2x2ZShyZXNwb25zZSk7XG59KTtcblxudmFyIEVycm9ySGFuZGxlciA9IG1ha2VIYW5kbGVyKGZ1bmN0aW9uIChlcnJvcikge1xuICB0aGlzLnJlamVjdChlcnJvcik7XG59KTtcblxuZnVuY3Rpb24gUHJveHkocHJveHksIHdpbikge1xuICB2YXIgb25SZXF1ZXN0ID0gcHJveHkub25SZXF1ZXN0LFxuICAgIG9uUmVzcG9uc2UgPSBwcm94eS5vblJlc3BvbnNlLFxuICAgIG9uRXJyb3IgPSBwcm94eS5vbkVycm9yO1xuXG4gIGZ1bmN0aW9uIGhhbmRsZVJlc3BvbnNlKHhociwgeGhyUHJveHkpIHtcbiAgICB2YXIgaGFuZGxlciA9IG5ldyBSZXNwb25zZUhhbmRsZXIoeGhyKTtcbiAgICB2YXIgcmV0ID0ge1xuICAgICAgcmVzcG9uc2U6IHhoclByb3h5LnJlc3BvbnNlLFxuICAgICAgc3RhdHVzOiB4aHJQcm94eS5zdGF0dXMsXG4gICAgICBzdGF0dXNUZXh0OiB4aHJQcm94eS5zdGF0dXNUZXh0LFxuICAgICAgY29uZmlnOiB4aHIuY29uZmlnLFxuICAgICAgaGVhZGVyczogeGhyLnJlc0hlYWRlciB8fCB4aHIuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkuc3BsaXQoJ1xcclxcbicpLnJlZHVjZShmdW5jdGlvbiAob2IsIHN0cikge1xuICAgICAgICBpZiAoc3RyID09PSBcIlwiKSByZXR1cm4gb2I7XG4gICAgICAgIHZhciBtID0gc3RyLnNwbGl0KFwiOlwiKTtcbiAgICAgICAgb2JbbS5zaGlmdCgpXSA9IHRyaW0obS5qb2luKCc6JykpO1xuICAgICAgICByZXR1cm4gb2I7XG4gICAgICB9LCB7fSlcbiAgICB9O1xuICAgIGlmICghb25SZXNwb25zZSkgcmV0dXJuIGhhbmRsZXIucmVzb2x2ZShyZXQpO1xuICAgIG9uUmVzcG9uc2UocmV0LCBoYW5kbGVyKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uZXJyb3IoeGhyLCB4aHJQcm94eSwgZXJyb3IsIGVycm9yVHlwZSkge1xuICAgIHZhciBoYW5kbGVyID0gbmV3IEVycm9ySGFuZGxlcih4aHIpO1xuICAgIGVycm9yID0ge2NvbmZpZzogeGhyLmNvbmZpZywgZXJyb3I6IGVycm9yLCB0eXBlOiBlcnJvclR5cGV9O1xuICAgIGlmIChvbkVycm9yKSB7XG4gICAgICBvbkVycm9yKGVycm9yLCBoYW5kbGVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaGFuZGxlci5uZXh0KGVycm9yKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBwcmV2ZW50WGhyUHJveHlDYWxsYmFjaygpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2soZXJyb3JUeXBlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh4aHIsIGUpIHtcbiAgICAgIG9uZXJyb3IoeGhyLCB0aGlzLCBlLCBlcnJvclR5cGUpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc3RhdGVDaGFuZ2VDYWxsYmFjayh4aHIsIHhoclByb3h5KSB7XG4gICAgaWYgKHhoci5yZWFkeVN0YXRlID09PSA0ICYmIHhoci5zdGF0dXMgIT09IDApIHtcbiAgICAgIGhhbmRsZVJlc3BvbnNlKHhociwgeGhyUHJveHkpO1xuICAgIH0gZWxzZSBpZiAoeGhyLnJlYWR5U3RhdGUgIT09IDQpIHtcbiAgICAgIHRyaWdnZXJMaXN0ZW5lcih4aHIsIGV2ZW50UmVhZHlTdGF0ZUNoYW5nZSk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcmV0dXJuIGhvb2soe1xuICAgIG9ubG9hZDogcHJldmVudFhoclByb3h5Q2FsbGJhY2ssXG4gICAgb25sb2FkZW5kOiBwcmV2ZW50WGhyUHJveHlDYWxsYmFjayxcbiAgICBvbmVycm9yOiBlcnJvckNhbGxiYWNrKGV2ZW50RXJyb3IpLFxuICAgIG9udGltZW91dDogZXJyb3JDYWxsYmFjayhldmVudFRpbWVvdXQpLFxuICAgIG9uYWJvcnQ6IGVycm9yQ2FsbGJhY2soZXZlbnRBYm9ydCksXG4gICAgb25yZWFkeXN0YXRlY2hhbmdlOiBmdW5jdGlvbiAoeGhyKSB7XG4gICAgICByZXR1cm4gc3RhdGVDaGFuZ2VDYWxsYmFjayh4aHIsIHRoaXMpO1xuICAgIH0sXG4gICAgb3BlbjogZnVuY3Rpb24gb3BlbihhcmdzLCB4aHIpIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICB2YXIgY29uZmlnID0geGhyLmNvbmZpZyA9IHtoZWFkZXJzOiB7fX07XG4gICAgICBjb25maWcubWV0aG9kID0gYXJnc1swXTtcbiAgICAgIGNvbmZpZy51cmwgPSBhcmdzWzFdO1xuICAgICAgY29uZmlnLmFzeW5jID0gYXJnc1syXTtcbiAgICAgIGNvbmZpZy51c2VyID0gYXJnc1szXTtcbiAgICAgIGNvbmZpZy5wYXNzd29yZCA9IGFyZ3NbNF07XG4gICAgICBjb25maWcueGhyID0geGhyO1xuICAgICAgdmFyIGV2TmFtZSA9ICdvbicgKyBldmVudFJlYWR5U3RhdGVDaGFuZ2U7XG4gICAgICBpZiAoIXhocltldk5hbWVdKSB7XG4gICAgICAgIHhocltldk5hbWVdID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiBzdGF0ZUNoYW5nZUNhbGxiYWNrKHhociwgX3RoaXMpO1xuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICAvLyDlpoLmnpzmnInor7fmsYLmi6bmiKrlmajvvIzliJnlnKjosIPnlKhvblJlcXVlc3TlkI7lho3miZPlvIDpk77mjqXjgILlm6DkuLpvblJlcXVlc3TmnIDkvbPosIPnlKjml7bmnLrmmK/lnKhzZW5k5YmN77yMXG4gICAgICAvLyDmiYDku6XmiJHku6zlnKhzZW5k5oum5oiq5Ye95pWw5Lit5YaN5omL5Yqo6LCD55Sob3Blbu+8jOWboOatpOi/lOWbnnRydWXpmLvmraJ4aHIub3Blbuiwg+eUqOOAglxuICAgICAgLy9cbiAgICAgIC8vIOWmguaenOayoeacieivt+axguaLpuaIquWZqO+8jOWImeS4jeeUqOmYu+aWrXhoci5vcGVu6LCD55SoXG4gICAgICBpZiAob25SZXF1ZXN0KSByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuICAgIHNlbmQ6IGZ1bmN0aW9uIChhcmdzLCB4aHIpIHtcbiAgICAgIHZhciBjb25maWcgPSB4aHIuY29uZmlnXG4gICAgICBjb25maWcud2l0aENyZWRlbnRpYWxzID0geGhyLndpdGhDcmVkZW50aWFsc1xuICAgICAgY29uZmlnLmJvZHkgPSBhcmdzWzBdO1xuICAgICAgaWYgKG9uUmVxdWVzdCkge1xuICAgICAgICAvLyBJbiAnb25SZXF1ZXN0Jywgd2UgbWF5IGNhbGwgWEhSJ3MgZXZlbnQgaGFuZGxlciwgc3VjaCBhcyBgeGhyLm9ubG9hZGAuXG4gICAgICAgIC8vIEhvd2V2ZXIsIFhIUidzIGV2ZW50IGhhbmRsZXIgbWF5IG5vdCBiZSBzZXQgdW50aWwgeGhyLnNlbmQgaXMgY2FsbGVkIGluXG4gICAgICAgIC8vIHRoZSB1c2VyJ3MgY29kZSwgc28gd2UgdXNlIGBzZXRUaW1lb3V0YCB0byBhdm9pZCB0aGlzIHNpdHVhdGlvblxuICAgICAgICB2YXIgcmVxID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIG9uUmVxdWVzdChjb25maWcsIG5ldyBSZXF1ZXN0SGFuZGxlcih4aHIpKTtcbiAgICAgICAgfVxuICAgICAgICBjb25maWcuYXN5bmMgPT09IGZhbHNlID8gcmVxKCkgOiBzZXRUaW1lb3V0KHJlcSlcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfSxcbiAgICBzZXRSZXF1ZXN0SGVhZGVyOiBmdW5jdGlvbiAoYXJncywgeGhyKSB7XG4gICAgICAvLyBDb2xsZWN0IHJlcXVlc3QgaGVhZGVyc1xuICAgICAgeGhyLmNvbmZpZy5oZWFkZXJzW2FyZ3NbMF0udG9Mb3dlckNhc2UoKV0gPSBhcmdzWzFdO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSxcbiAgICBhZGRFdmVudExpc3RlbmVyOiBmdW5jdGlvbiAoYXJncywgeGhyKSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgaWYgKGV2ZW50cy5pbmRleE9mKGFyZ3NbMF0pICE9PSAtMSkge1xuICAgICAgICB2YXIgaGFuZGxlciA9IGFyZ3NbMV07XG4gICAgICAgIGdldEV2ZW50VGFyZ2V0KHhocikuYWRkRXZlbnRMaXN0ZW5lcihhcmdzWzBdLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIHZhciBldmVudCA9IGNvbmZpZ0V2ZW50KGUsIF90aGlzKTtcbiAgICAgICAgICBldmVudC50eXBlID0gYXJnc1swXTtcbiAgICAgICAgICBldmVudC5pc1RydXN0ZWQgPSB0cnVlO1xuICAgICAgICAgIGhhbmRsZXIuY2FsbChfdGhpcywgZXZlbnQpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfSxcbiAgICBnZXRBbGxSZXNwb25zZUhlYWRlcnM6IGZ1bmN0aW9uIChfLCB4aHIpIHtcbiAgICAgIHZhciBoZWFkZXJzID0geGhyLnJlc0hlYWRlclxuICAgICAgaWYgKGhlYWRlcnMpIHtcbiAgICAgICAgdmFyIGhlYWRlciA9IFwiXCI7XG4gICAgICAgIGZvciAodmFyIGtleSBpbiBoZWFkZXJzKSB7XG4gICAgICAgICAgaGVhZGVyICs9IGtleSArICc6ICcgKyBoZWFkZXJzW2tleV0gKyAnXFxyXFxuJztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaGVhZGVyO1xuICAgICAgfVxuICAgIH0sXG4gICAgZ2V0UmVzcG9uc2VIZWFkZXI6IGZ1bmN0aW9uIChhcmdzLCB4aHIpIHtcbiAgICAgIHZhciBoZWFkZXJzID0geGhyLnJlc0hlYWRlclxuICAgICAgaWYgKGhlYWRlcnMpIHtcbiAgICAgICAgcmV0dXJuIGhlYWRlcnNbKGFyZ3NbMF0gfHwgJycpLnRvTG93ZXJDYXNlKCldO1xuICAgICAgfVxuICAgIH1cbiAgfSwgd2luKTtcbn1cblxuXG5cblxuIiwiLy8gQHRzLW5vY2hlY2tcbmltcG9ydCB7IHByb3h5LCB1blByb3h5IH0gZnJvbSBcImFqYXgtaG9va1wiO1xuXG5sZXQgbWF0Y2hpbmdzOiBNYXRjaGluZ0VudGl0eVtdID0gW11cblxucHJveHkoe1xuICAgIC8v6K+35rGC5Y+R6LW35YmN6L+b5YWlXG4gICAgb25SZXF1ZXN0OiAoY29uZmlnLCBoYW5kbGVyKSA9PiB7XG4gICAgICAgIGZvciAoY29uc3QgbWF0Y2hpbmcgb2YgbWF0Y2hpbmdzKSB7XG4gICAgICAgICAgICBjb25zdCByZWdleHAgPSBuZXcgUmVnRXhwKG1hdGNoaW5nLnJlZ2V4cFN0cilcbiAgICAgICAgICAgIGlmIChyZWdleHAudGVzdChjb25maWcudXJsKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBoYW5kbGVyLnJlc29sdmUoe1xuICAgICAgICAgICAgICAgICAgICBjb25maWc6IGNvbmZpZyxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAyMDAsXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLTgnIH0sXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlOiBtYXRjaGluZy5yZXNKc29uXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGhhbmRsZXIubmV4dChjb25maWcpO1xuICAgIH1cbn0pXG5cbmZ1bmN0aW9uIGluaXQoKSB7XG4gICAgZ2V0TWF0Y2hpbmdzKClcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgKGUpID0+IHtcbiAgICAgICAgY29uc3QgeyBkYXRhIH0gPSBlXG5cbiAgICAgICAgaWYgKGRhdGEuZXZlbnQgPT09ICdpbmplY3RfZ2V0X21hdGNoaW5nX3JlcycpIHtcbiAgICAgICAgICAgIG1hdGNoaW5ncyA9IGUuZGF0YS5kYXRhXG4gICAgICAgIH1cbiAgICB9KVxufVxuXG5mdW5jdGlvbiBnZXRNYXRjaGluZ3MoKSB7XG4gICAgd2luZG93LnBvc3RNZXNzYWdlKHtcbiAgICAgICAgZXZlbnQ6ICdpbmplY3RfZ2V0X21hdGNoaW5nJyxcbiAgICAgICAgZGF0YTogbnVsbFxuICAgIH0pXG59XG5cbmluaXQoKSJdLCJuYW1lcyI6WyJldmVudHMiLCJjb25maWdFdmVudCIsImV2ZW50IiwieGhyUHJveHkiLCJlIiwiYXR0ciIsInRhcmdldCIsImN1cnJlbnRUYXJnZXQiLCJzaW5nbGV0b24iLCJldmVudExvYWQiLCJldmVudExvYWRFbmQiLCJldmVudFRpbWVvdXQiLCJldmVudEVycm9yIiwiZXZlbnRSZWFkeVN0YXRlQ2hhbmdlIiwiZXZlbnRBYm9ydCIsImdldEV2ZW50VGFyZ2V0IiwieGhyIiwid2F0Y2hlciIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInRyaWdnZXJMaXN0ZW5lciIsIm5hbWUiLCJldnQiLCJnZXRQcm94eSIsImNhbGxiYWNrIiwidHlwZSIsIkV2ZW50IiwiYnViYmxlcyIsImNyZWF0ZUV2ZW50IiwiaW5pdEV2ZW50IiwiZGlzcGF0Y2hFdmVudCIsIkhhbmRsZXIiLCJ0aGlzIiwibWFrZUhhbmRsZXIiLCJuZXh0Iiwic3ViIiwiY2FsbCIsIk9iamVjdCIsImNyZWF0ZSIsInJlc29sdmUiLCJyZXNwb25zZSIsInJlYWR5U3RhdGUiLCJyZXNIZWFkZXIiLCJoZWFkZXJzIiwicmVzcG9uc2VUZXh0Iiwic3RhdHVzVGV4dCIsInN0YXR1cyIsInJlamVjdCIsImVycm9yIiwiUmVxdWVzdEhhbmRsZXIiLCJycSIsImtleSIsImNvbmZpZyIsIndpdGhDcmVkZW50aWFscyIsIm9wZW4iLCJtZXRob2QiLCJ1cmwiLCJhc3luYyIsInVzZXIiLCJwYXNzd29yZCIsInNldFJlcXVlc3RIZWFkZXIiLCJzZW5kIiwiYm9keSIsIlJlc3BvbnNlSGFuZGxlciIsIkVycm9ySGFuZGxlciIsIlByb3h5IiwicHJveHkiLCJ3aW4iLCJvblJlcXVlc3QiLCJvblJlc3BvbnNlIiwib25FcnJvciIsInByZXZlbnRYaHJQcm94eUNhbGxiYWNrIiwiZXJyb3JDYWxsYmFjayIsImVycm9yVHlwZSIsImhhbmRsZXIiLCJvbmVycm9yIiwic3RhdGVDaGFuZ2VDYWxsYmFjayIsInJldCIsImdldEFsbFJlc3BvbnNlSGVhZGVycyIsInNwbGl0IiwicmVkdWNlIiwib2IiLCJzdHIiLCJtIiwic2hpZnQiLCJyZXBsYWNlIiwidHJpbSIsImpvaW4iLCJoYW5kbGVSZXNwb25zZSIsImdldHRlckZhY3RvcnkiLCJ2IiwiaGFzT3duUHJvcGVydHkiLCJhdHRyR2V0dGVySG9vayIsInNldHRlckZhY3RvcnkiLCJ0aGF0IiwiaG9vayIsInN1YnN0cmluZyIsImF0dHJTZXR0ZXJIb29rIiwiaG9va0Z1bmN0aW9uIiwiZnVuIiwiYXJncyIsInNsaWNlIiwiYXJndW1lbnRzIiwiYXBwbHkiLCJ3aW5kb3ciLCJYTUxIdHRwUmVxdWVzdCIsImkiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJkZWZpbmVQcm9wZXJ0eSIsImdldCIsInNldCIsImVudW1lcmFibGUiLCJhc3NpZ24iLCJVTlNFTlQiLCJPUEVORUQiLCJIRUFERVJTX1JFQ0VJVkVEIiwiTE9BRElORyIsIkRPTkUiLCJvbmxvYWQiLCJvbmxvYWRlbmQiLCJvbnRpbWVvdXQiLCJvbmFib3J0Iiwib25yZWFkeXN0YXRlY2hhbmdlIiwiX3RoaXMiLCJldk5hbWUiLCJyZXEiLCJzZXRUaW1lb3V0IiwidG9Mb3dlckNhc2UiLCJhZGRFdmVudExpc3RlbmVyIiwiaW5kZXhPZiIsImlzVHJ1c3RlZCIsIl8iLCJoZWFkZXIiLCJnZXRSZXNwb25zZUhlYWRlciIsIm1hdGNoaW5ncyIsIlJlZ0V4cCIsInJlZ2V4cFN0ciIsInRlc3QiLCJyZXNKc29uIiwicG9zdE1lc3NhZ2UiLCJkYXRhIl0sInNvdXJjZVJvb3QiOiIifQ==